let tab,hidden=!0,isMedium=!1;const ids={hide:"hide-premium-content"},menu=chrome.contextMenus,message=chrome.tabs.sendMessage;function isTab(){tab&&tab.url.includes("medium")?(isMedium=!0,isMedium&&(message(tab.id,{command:"hide"}),chrome.browserAction.setIcon({path:"./icons/icon_16.png"}))):(isMedium=!1,chrome.browserAction.setIcon({path:"./icons/icon_grey_16.png"}))}function show(){message(tab.id,{command:"show"}),chrome.browserAction.setIcon({path:"./icons/icon_grey_16.png"})}function hide(){message(tab.id,{command:"hide"}),chrome.browserAction.setIcon({path:"./icons/icon_16.png"})}chrome.browserAction.onClicked.addListener(function(){isMedium&&(hidden=!hidden,hidden?hide():show())}),chrome.webRequest.onCompleted.addListener(function(a){"xmlhttprequest"===a.type&&hidden&&isTab()},{urls:["*://*.medium.com/*"]}),chrome.tabs.onUpdated.addListener(function(){chrome.tabs.query({active:!0},a=>{tab=a[0],isTab()})}),chrome.tabs.onActivated.addListener(function(){chrome.tabs.query({active:!0},a=>{tab=a[0],isTab()})});